# Conexus TLS Configuration Example
# This example shows how to configure HTTPS/TLS for Conexus

server:
  host: "0.0.0.0"
  port: 8443  # HTTPS port

database:
  path: "./data/conexus.db"

indexer:
  root_path: "."
  chunk_size: 512
  chunk_overlap: 50

embedding:
  provider: "mock"
  model: "mock-768"
  dimensions: 768

logging:
  level: "info"
  format: "json"

# TLS Configuration
tls:
  enabled: true

  # Option 1: Manual certificates (for production)
  # cert_file: "/path/to/certificate.pem"
  # key_file: "/path/to/private-key.pem"

  # Option 2: Let's Encrypt auto-cert (for production)
  # auto_cert: true
  # auto_cert_domains: ["yourdomain.com", "www.yourdomain.com"]
  # auto_cert_email: "admin@yourdomain.com"
  # auto_cert_cache_dir: "./data/tls-cache"

  # Option 3: Self-signed certificates (for development)
  auto_cert: false  # Use manual certs
  cert_file: "./data/tls/cert.pem"
  key_file: "./data/tls/key.pem"

  # TLS Security Settings
  min_version: "1.2"  # Options: 1.0, 1.1, 1.2, 1.3
  cipher_suites: []   # Leave empty for secure defaults
  curve_preferences: []  # Leave empty for secure defaults
  http_redirect_port: 8080  # Port for HTTP to HTTPS redirect

# Security headers (HSTS is especially important with HTTPS)
security:
  csp:
    enabled: true
    default: ["'none'"]
    script: ["'self'"]
    style: ["'self'"]
    image: ["'self'"]
    font: ["'self'"]
    connect: ["'self'"]
    media: ["'none'"]
    object: ["'none'"]
    frame: ["'none'"]
  hsts:
    enabled: true
    max_age: 31536000  # 1 year
    include_subdomains: true
    preload: false
  x_frame_options: "DENY"
  x_content_type_options: "nosniff"
  referrer_policy: "strict-origin-when-cross-origin"
  permissions_policy: "camera=(), microphone=(), geolocation=(), payment=()"

# CORS (restrict in production)
cors:
  enabled: false
  allowed_origins: []
  allowed_methods: ["GET", "POST"]
  allowed_headers: ["Content-Type", "Authorization"]
  exposed_headers: []
  allow_credentials: false
  max_age: 86400

# Observability
observability:
  metrics:
    enabled: false
    port: 9091
    path: "/metrics"
  tracing:
    enabled: false
    endpoint: "http://localhost:4318"
    sample_rate: 0.1
  sentry:
    enabled: false
    dsn: ""
    environment: "development"
    sample_rate: 1.0
    release: "0.1.0-alpha"